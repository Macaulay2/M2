				 Macaulay 2
		by Daniel R. Grayson and Michael E. Stillman

Macaulay 2 preliminary porting instructions and notes

    We use gcc/g++ version 2.7.2 or 2.7.2.1, gnu make version 3.74, and gawk
3.0; you should install these yourself.  We use various other libraries,
whose sources are included in this distribution for your convenience,
although you may prefer to pick up more recent versions of these libraries.
These libraries have their own copying licenses.  The copying license for
Macaulay 2 is in ./Macaulay2/licenses/README.

library: Macaulay2
 author: Daniel R. Grayson <dan@math.uiuc.edu>
	 Michael E. Stillman <mike@math.cornell.edu>
 get at: http://www.math.uiuc.edu/Macaulay2
license: Macaulay2/licenses/README

library: factory
release: factory-1.2c
 author: G-M. Greuel <greuel@mathematik.uni-kl.de>
	 R. Stobbe <stobbe@mathematik.uni-kl.de>
 get at: 
license: available soon

library: libfac
release: libfac-0.3.0
 author: Michael Messollen <michael@math.uni-sb.de>
 get at:
license: libfac/00README

library: MP
release: 1.1.3
 author: S. Gray, N. Kajler, P. Wang 
 get at: ftp.mcs.kent.edu:dist/MP
license: mp/README

library: gmp
release: gmp-2.0.2
 author: Torbjorn Granlund <tege@nada.kth.se>
bugs to: <bug-gmp@prep.ai.mit.edu>
 get at: prep.ai.mit.edu:pub/gnu
license: gmp-2.0/COPYING.LIB

library: gc
release: gc4.12alpha3
 author: Hans Boehm <boehm@mti.sgi.com>
 get at: http://reality.sgi.com/employees/boehm_mti/gc.html
license: gc/README

library: libc
release: 5.3.12
 get at: prep.ai.mit.edu:pub/gnu
license: Macaulay2/licenses/gnulib.lic

library: libg++
release:
 get at: prep.ai.mit.edu:pub/gnu
license: Macaulay2/licenses/gnulib.lic

To compile Macaulay 2 type 'make' in this directory.  The resulting shell
script, ./Macaulay2/bin/M2, can then be installed in /usr/local/bin.  Local
options (governing profiling, stripping, etc) can be set in the file
Makefile.lcl.
	
-----------------------
Windows 95 and NT notes
-----------------------

There are two ways to compile Macaulay 2 under Windows 95 and NT.

	-------------------------------
	Microsoft Visual C/C++ compiler
	-------------------------------

	We use Microsoft Visual C/C++ compiler version 5.0 with service pack
	2.  First install the "gnuish" utilities in C:\WINNT\SYSTEM32:
	awk.exe, cp.exe, gawk.exe, grep.exe, ls.exe, make.exe, mv.exe,
	pwd.exe, rm.exe, sed.exe, and uname.exe.  Then open up the workspace,
	M2.dsw, set it to build the Release version, and start it compiling.

	----------------------
	The Cygnus port of GCC
	----------------------

	Download cdk.exe from http://www.cygnus.com/misc/gnu-win32/ and
	type make.  It should all work!  (oops, does this require
	distribution of a .dll file, too?)

	You will also want to pick up emacs for Windows from
	http://www.cs.washington.edu/homes/voelker/ntemacs.html .

	Problems:
	   general:
		environment variables are all upper case!
		read() isn't interruptable
	   make:
		'export' does not work in makefiles.
		some targets in makefiles get run in parallel (?)
	   c library:
		abort() seems to be equivalent to exit(0)
	   bash:
		'cd ..' doesn't work from the initial directory
		when bash is started by emacs
	   ps:
		reports WIN32-PID in octal instead of decimal
	   kill:
		doesn't ever kill any processes

----------------------
Linux notes
----------------------
You may have to remove the option -lieee from Macaulay2/d/Makefile if the
library doesn't exist on your system.  It exists in Slackware Linux, at least
old versions, but not in RedHat Linux.

----------------------
MS-DOS notes
----------------------

The MS-DOS version is no longer supported, but here are the instructions
previously given.

Install DJGPP v2, available from /ftp@ftp.coast.net:SimTel/vendors/djgpp.
Install all the applications, too: make, ranlib, gawk, ar, sed, ...

Remember to use utod to convert all the *.m2 files in m2, m2/scriptde, and
tutorial/final to the msdos newline conventions.  This will ensure that
embedded strings containing newlines will have the right newline characters
there.

crt0.s: The source is in djlsr201.zip, and needs to be modified according to
	the file Macaulay2/msdos/crt0-diffs to support gc.  Do this manually
	and replace %DJGPP%/lib/crt0.o.
	The variable _go32_info_block is defined in src/libc/go32/infostrc.c.
gmp: Use the file make.bat that comes with it to compile it.
gc: Still needs a bit of work.
factory: Run 
		GMP_INCLUDE_PATH=../include
		export GMP_INCLUDE_PATH
		configure msdos --prefix=../lib --with-memman --with-optimize
	under Linux and then move Makefile and conf.h over.
libfac: The include files factor.h and Factor.h tend to get confused for each
	other.  One thing to try is to remove -I. from IFLAGS in libfac-0.2/Makefile.

-----------------------------------------------------------------------------

Macaulay 2 is copyright 1993-1997 by Daniel R. Grayson and Michael
E. Stillman, all rights reserved.

Daniel R. Grayson 	<dan@math.uiuc.edu>
Michael E. Stillman	<mike@math.cornell.edu>

-----------------------------------------------------------------------------
