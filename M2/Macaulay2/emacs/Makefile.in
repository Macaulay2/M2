# @configure_input@
include ../../include/config.Makefile
VPATH = @srcdir@
LD_LIBRARY_PATH := ../../libraries/final@FINALPREFIX@/lib:$(LD_LIBRARY_PATH)
export LD_LIBRARY_PATH
ARGS = -q --silent --stop -e errorDepth=0
.PHONY : all clean distclean install check default
MADEDIRS = $(emacsdocdir) $(emacsdir)
MADEFILES = M2-symbols.el M2-symbols emacs-hlp.txt emacs.m2
all::; x=; for i in $(MADEFILES) ; do test -f $$i || x=x ; done ; if test "$$x"; then $(MAKE) $(MADEFILES); fi
install:: $(MADEFILES)
clean::; rm -f $(MADEFILES)
M2-symbols M2-symbols.el : makesyms.m2 ../m2/exports.m2 ../bin/M2$(EXE); ../bin/M2$(EXE) $(ARGS) @srcdir@/makesyms.m2 -e 'exit 0' </dev/null
emacs-hlp.txt: makehlp.m2 ../bin/M2$(EXE); ../bin/M2$(EXE) $(ARGS) @srcdir@/makehlp.m2 -e 'exit 0' </dev/null
emacs.m2: makem2.m2 ../bin/M2$(EXE); ../bin/M2$(EXE) $(ARGS) @srcdir@/makem2.m2 -e 'exit 0' </dev/null
distclean:: clean; rm -f Makefile
$(MADEDIRS) :; $(INSTALL) -d "$@"
install:: $(MADEDIRS)
all    :: M2-mode.el M2.el M2-symbols.el M2-init.el
install:: M2-mode.el M2.el M2-symbols.el M2-init.el; $(INSTALL_DATA) $^ $(emacsdir)
install:: $(emacsdocdir)
install:: emacs-hlp.txt emacs.m2 README; $(INSTALL_DATA) $^ $(emacsdocdir)
Makefile : Makefile.in; cd ../..; ./config.status Macaulay2/emacs/Makefile
all:: M2-init.el
M2-init.el : M2-init.el.in; cd ../..; ./config.status Macaulay2/emacs/M2-init.el
clean::; rm -rf M2-init.el

# Local Variables:
# compile-command: "make -C $M2BUILDDIR/Macaulay2/emacs "
# End:
