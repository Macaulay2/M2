# @configure_input@

VPATH = @srcdir@

# DOTS is the path to M2/Macaulay2 from this directory
DOTS = ../../..
include $(DOTS)/../include/config.Makefile

SRCDIR = @srcdir@
include Makefile.test

all:

check::
	$(MAKE) -C slow $@
	: skipping obsolete raw engine tests: $(MAKE) -k -C engine $@
clean::
	$(MAKE) -C slow $@
	$(MAKE) -C engine $@

ifneq "@DUMPDATA@" "no"
RESULTS += dumpdata.out
endif

distclean::
	$(MAKE) -C engine $@
	$(MAKE) -C slow $@

docStructure.out : docStructure.m2

Makefile : Makefile.in; cd $(DOTS)/..; ./config.status Macaulay2/packages/Macaulay2Doc/test/Makefile
Makefile.test : Makefile.test.in; cd $(DOTS)/..; ./config.status Macaulay2/packages/Macaulay2Doc/test/Makefile.test

status ::
	: skipping: $(MAKE) -C engine $@
	$(MAKE) -C slow $@
	: skipping: $(MAKE) -C goals $@
	: skipping: $(MAKE) -C gigantic $@

MIKE_TESTS := $(wildcard @srcdir@/mt-*.m2 @srcdir@/gigantic/mt-*.m2)
MIKE_RESULTS := $(patsubst @srcdir@/%.m2, %.out, $(MIKE_TESTS))
mike-tests: $(MIKE_RESULTS) ; grep sys $^ 

# Local Variables:
# compile-command: "make -k -C $M2BUILDDIR/Macaulay2/packages/Macaulay2Doc/test "
# End:
