# @configure_input@
include ../../../include/config.Makefile
VPATH = @srcdir@
CCTESTS = test_monomial.o \
	test_ring.o \
	test_gb.o

CTESTS = \
	check_monomial.o \
	check_monordering.o \
	check_monoid.o \
	check_ring.o \
	check_freemodule.o \
	check_matrix.o \

#	check_sparsemat.o

#	check_lapack.o

CPPFLAGS += -I@srcdir@/.. -I../../util -I..
LIBRARYFILES += ../libgb.a 

ifeq "$(OS)" "Darwin"
LDFLAGS += -multiply_defined suppress
endif

LDLIBS += ../../d/M2inits1.o  ../../d/M2mem.o ../../d/M2inits2.o ../../d/gmp_init.o ../../d/tokens_stub.o $(LIBRARYFILES) $(LAPACKLIBS) -lfac -lcf -lfac -lcfmem -lntl -lgmp -lgc -ldl -lm -lc -lstdc++
CFLAGS += -g -ansi

COBJ = ../../d/debug.o ../../d/M2types.o ../../d/M2inits.o util.o src_test/Ctest.o src_test/Csuite.o
CCOBJ = ../../d/debug.o ../../d/M2types.o ../../d/M2inits.o util.o src_test/test.o src_test/suite.o

all :: check
check_cc : $(CCTESTS) $(CCOBJ) ../libgb.a
check_c : $(CTESTS) $(COBJ) ../libgb.a
check : check_cc check_c
	./check_cc
	./check_c

Makefile : Makefile.in; cd ../../..; ./config.status Macaulay2/e/check/Makefile
clean::; rm -f *.o check_cc check_c
clean distclean::; $(MAKE) -C src_test $@
distclean::; rm -f Makefile

# Local Variables:
# compile-command: "make -C $M2BUILDDIR/Macaulay2/e/check "
# End:
