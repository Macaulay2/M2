RINGS = {GF 8,ZZ/101,QQ,QQ[x],RR_53,RR_100,CC_53,CC_100}
for K in RINGS do (
    M = matrix {{0,1_K},{1,0}};
    assert(det M == -1)
    )

-- c.f. https://github.com/Macaulay2/M2/issues/3407
m = matrix(ZZ/32003[x]/(x), {
	{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
	{0,-2,0,0,-2,0,0,0,0,0,0,1,0,0,0,0,3,0,0},
	{0,0,2,0,0,-1,0,0,0,3,0,0,-1,0,-3,0,0,1,0},
	{0,0,0,-2,0,0,1,1,0,0,3,0,0,0,0,0,0,0,3},
	{0,-1,0,0,3,0,0,0,3,0,0,2,0,3,0,0,3,0,0},
	{0,0,1,0,0,-1,0,0,0,0,0,0,-1,0,1,0,0,-1,0},
	{0,0,0,2,0,0,3,-1,0,0,1,0,0,0,0,3,0,0,1},
	{0,0,0,0,0,0,-1,0,0,0,-1,0,0,0,0,1,0,0,-1},
	{0,-2,0,0,-2,0,0,0,0,0,0,1,0,0,0,0,3,0,0},
	{0,0,3,0,0,2,0,0,0,1,0,0,2,0,-1,0,0,-2,0},
	{0,0,0,2,0,0,3,-1,0,0,1,0,0,0,0,3,0,0,1},
	{0,-1,0,0,-2,0,0,0,1,0,0,1,0,1,0,0,2,0,0},
	{0,0,-1,0,0,0,0,0,0,-3,0,0,0,0,-3,0,0,-2,0},
	{0,0,0,0,2,0,0,0,-2,0,0,-1,0,-2,0,0,-1,0,0},
	{0,0,-2,0,0,-3,0,0,0,-1,0,0,-3,0,2,0,0,1,0},
	{0,0,0,0,0,0,2,0,0,0,2,0,0,0,0,-2,0,0,2},
	{0,2,0,0,-3,0,0,0,-2,0,0,-2,0,-2,0,0,3,0,0},
	{0,0,-3,0,0,-3,0,0,0,3,0,0,-3,0,-1,0,0,-1,0},
	{0,0,0,2,0,0,-2,-1,0,0,3,0,0,0,0,1,0,0,3}})
(t, d) = toSequence elapsedTiming det m;
assert(t < 0.01 and d == 0)

end

restart
load "det.m2"
