# @configure_input@
include ../../../include/config.Makefile
VPATH = @srcdir@
RESULTS := $(notdir $(patsubst %.m2, %.okay, $(wildcard @srcdir@/*.m2))) $(notdir $(patsubst %.m2-input, %.okay, $(wildcard @srcdir@/*.m2-input)))
all :: $(RESULTS)
$(RESULTS) : ../../bin/M2
ARGS := --silent --stop -q -e errorDepth=0
ARGS += -e 'path = prepend("@srcdir@/",path)'

# uncomment this for further debugging:
# ARGS += -e 'errorDepth = 0'

%.okay : %.m2
	@ echo testing $<
	ulimit -t 600; ../../bin/M2 $(ARGS) <$<
	@ touch $@

clean::; rm -f *.okay core
distclean: clean; rm -f Makefile
Makefile : Makefile.in; cd ../../..; ./config.status Macaulay2/test/engine/Makefile

# Local Variables:
# compile-command: "make -C $M2BUILDDIR/Macaulay2/test/engine"
# End:
