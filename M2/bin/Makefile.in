# @configure_input@
VPATH = @srcdir@
include ../include/config.Makefile
all:: M2
M2 : M2-build.in
	cd ..   ; \
	        case "$<" in /*) PREFIX= ;; *) PREFIX=bin/ ;; esac   ; \
		./config.status --file=bin/$@:$$PREFIX/$<
	rm -f config.log
	chmod 0755 $@

install :: $(bindir)/M2 $(bindir)/M2.bat
$(bindir)/M2 : M2-final.in
	$(INSTALL) -d $(bindir)
	sed \
		-e 's,@prefix\@,$(prefix),' \
		-e 's,@PACKAGE_VERSION\@,$(PACKAGE_VERSION),' \
		$< >"$@".tmp
	mv "$@".tmp "$@"
	chmod 0755 "$@"
$(bindir)/M2.bat : M2.bat
	cp $< $@

all :: M2-help
	[ -x $< ] || chmod a+x $<

install :: $(bindir)/M2-help
$(bindir)/M2-help : M2-help
	$(INSTALL) -d $(bindir)
	sed -e 's,^M2HOME=.*,M2HOME=$(prefix)/lib/Macaulay2-@PACKAGE_VERSION@,' $< >"$@".tmp
	mv "$@".tmp "$@"
	chmod 0755 "$@"

clean :; rm -f M2
