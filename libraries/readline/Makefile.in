VERSION = 5.2
PATCHES = 001 002 003 004 005 006 007 008 009 010 011 012 013

RELAX = yes
URL = ftp://ftp.gnu.org/gnu/readline
PATCHURL = $(URL)/readline-$(VERSION)-patches

BUILDTARGET = all
INSTALLTARGET = install

ifeq (@SHARED@,no)
CONFIGOPTIONS += --disable-shared
else
BUILDTARGET += shared
INSTALLTARGET += install-shared
endif

include ../Makefile.library
Makefile : @srcdir@/Makefile.in ; cd ../.. && ./config.status libraries/readline/Makefile

PATCHFILES := $(addprefix tarfiles/readline52-,$(PATCHES))
$(PATCHFILES) :; rm -f $@; cd tarfiles && wget $(PATCHURL)/$(notdir $@)
fetch : $(PATCHFILES)

clean::
	rm -rf $(LIBRARIESDIR)/lib/libhistory.* $(LIBRARIESDIR)/lib/libreadline.* \
		$(LIBRARIESDIR)/include/readline $(LIBRARIESDIR)/info/readline.*
# Local Variables:
# compile-command: "make -C $M2BUILDDIR/libraries/readline "
# End:
