# @configure_input@
# Targets to use:
.PHONY : all check clean distclean
ifdef XYZZY
  If you get an error message on this line, it is because you are not using
  the 'gnu' version of the 'make' program.  The source code for it is
  available at ftp://ftp.gnu.org/pub/gnu/make.
endif
include include/config.Makefile
VPATH = @srcdir@

.PRECIOUS test-configuration install all clean distclean:: @srcdir@/configure config.status

@srcdir@/configure : @srcdir@/configure.ac @srcdir@/config/files
	$(MAKE) -C @srcdir@ -f Makefile-configuration
	@echo '-----------------------------------------------------------------------------'
	@echo '| $@ has just been remade'
	@echo '| exiting so you can run it again the same way you did before'
	@echo '-----------------------------------------------------------------------------'
	@exit 1
config.status : @srcdir@/configure
	@echo '-----------------------------------------------------------------------------'
	@echo '| error: $^ not there or newer than $@'
	@echo '| exiting so you can run $^'
	@echo '-----------------------------------------------------------------------------'
	@exit 1

# announcement only:
install all clean distclean::
	@echo '-------- making '$@', $(PACKAGE_VERSION) for ARCH=$(ARCH) OS=$(OS) REL=$(REL) --------'

# first install target, the only place in the tree where 'all' is a prerequisite of 'install', hopefully.
install :: all

install :: ; rm -f INSTALLDIR && ln -s $(target) INSTALLDIR
clean   :: ; rm -f INSTALLDIR
distclean::; rm -f config.cache config.log config.status configure.options
distclean:: clean
ifeq "$(CC)" "cl"
all:: ;	$(MAKE) -C WindowsNT
endif
all install :: ; $(MAKE) -C man $@
all distclean check clean install :: ; $(MAKE) -C Macaulay2 $@
all::; $(MAKE) -C Macaulay2 doc
DIRS := $(target) $(bindir) $(libm2dir) $(man1dir) $(emacsdir) $(m2dir) $(docm2reldir)
install :: $(DIRS)
install :: ; $(MAKE) -C encap $@
$(DIRS) :; $(INSTALL) -d $@
Makefile : Makefile.in; ./config.status Makefile
distclean ::; rm -f @CONFIGURED_FILES@ include/config.h include/config.Makefile
install all clean distclean::; @echo "-------- done making '$@' --------"
